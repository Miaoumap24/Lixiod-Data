<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon WYSIWYG Trop Bien</title>
    <style>
        /* Styles de base et du corps */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f7f9fc; /* Arri√®re-plan tr√®s doux */
        padding: 20px;
        margin: 0;
    }

    /* Styles pour les toolbars (barres d'outils) */
    .toolbar {
        padding: 10px;
        display: flex;
        flex-wrap: wrap; /* Pour s'assurer que √ßa passe bien sur mobile */
        gap: 10px;
        border-radius: 8px;
        margin-bottom: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    /* Toolbar statique (Ajouter un bloc) - Rose doux */
    #static-toolbar {
        background-color: #ffe0e6;
    }

    /* Toolbar dynamique (√âdition) - Jaune doux */
    #dynamic-toolbar {
        background-color: #fce172;
    }

    /* Classe pour masquer les toolbars */
    .hidden {
        display: none !important;
    }

    /* Styles des boutons */
    .tool-button {
        cursor: pointer;
        padding: 8px 12px;
        border: 2px solid transparent;
        border-radius: 6px;
        background-color: #a8dadc; /* Bleu-vert doux */
        color: #1d3557;
        font-weight: bold;
        transition: all 0.2s ease-in-out;
    }

    .tool-button:hover {
        background-color: #457b9d;
        color: white;
        border-color: #457b9d;
        transform: translateY(-1px);
    }

    /* Bouton d'exportation pour le faire ressortir */
    .export-button {
        background-color: #e63946; /* Rouge */
        color: white;
        margin-left: auto; /* Le pousse vers la droite */
    }
    .export-button:hover {
        background-color: #c72c38;
        border-color: #c72c38;
    }


    /* Le conteneur principal de l'√©diteur */
    #editor {
        min-height: 500px;
        border: 2px dashed #a8dadc; /* Bordure douce pour indiquer la zone de travail */
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        transition: border-color 0.3s;
    }

    /* Styles des blocs de texte */
    .text-block {
        margin: 15px 0;
        padding: 10px;
        font-size: 16px;
        line-height: 1.6;
        border: 1px solid transparent;
        transition: border 0.2s, background-color 0.2s;
        cursor: pointer;
        outline: none; /* Tr√®s important pour l'√©dition */
    }

    /* Effet au survol des blocs */
    .text-block:hover {
        border: 1px dashed #457b9d;
        background-color: #f0f8ff; /* Tr√®s l√©g√®re couleur pour le survol */
    }

    /* Style du bloc actif (en mode √©dition) */
    .text-block.active {
        border: 2px solid #457b9d; /* Bordure bleue plus forte en √©dition */
        background-color: #ffffff;
    }
    </style>
</head>

<body>

    <div id="static-toolbar" class="toolbar">
        <button class="tool-button" id="add-text-btn">Ajouter un bloc de texte ‚úçÔ∏è</button>
        </div>

    <div id="dynamic-toolbar" class="toolbar hidden">
        <button class="tool-button" id="back-btn">Retour ‚¨ÖÔ∏è</button>
        <button class="tool-button" data-command="bold">Gras üÖ±Ô∏è</button>
        <button class="tool-button" data-command="italic">Italique üáÆ</button>
        <button class="tool-button export-button" id="export-btn">Exporter üì¶</button>
    </div>

    <div id="editor">
        </div>

    <script>
        // R√©f√©rences aux √©l√©ments du DOM
const editor = document.getElementById('editor');
const staticToolbar = document.getElementById('static-toolbar');
const dynamicToolbar = document.getElementById('dynamic-toolbar');
const addTextBtn = document.getElementById('add-text-btn');
const backBtn = document.getElementById('back-btn');
const exportBtn = document.getElementById('export-btn');

let activeBlock = null; // Variable pour suivre le bloc actuellement en √©dition

// ----------------------------------------------------------------------
// 1. GESTION DE L'AFFICHAGE DES TOOLBARS ET DES BLOCS
// ----------------------------------------------------------------------

function enterEditMode(block) {
    if (activeBlock) {
        activeBlock.classList.remove('active');
        activeBlock.contentEditable = 'false';
    }

    // Active le nouveau bloc
    activeBlock = block;
    activeBlock.classList.add('active');
    activeBlock.contentEditable = 'true';
    activeBlock.focus();

    // Change les barres d'outils
    staticToolbar.classList.add('hidden');
    dynamicToolbar.classList.remove('hidden');
}

function exitEditMode() {
    if (activeBlock) {
        activeBlock.contentEditable = 'false';
        activeBlock.classList.remove('active');
        activeBlock = null;
    }
    // Change les barres d'outils
    dynamicToolbar.classList.add('hidden');
    staticToolbar.classList.remove('hidden');
}

// ----------------------------------------------------------------------
// 2. √âV√âNEMENTS STATIQUES (Ajouter / Exporter)
// ----------------------------------------------------------------------

// Ajout d'un nouveau bloc de texte
addTextBtn.addEventListener('click', () => {
    // Cr√©e un nouveau paragraphe
    const newBlock = document.createElement('p');
    newBlock.classList.add('text-block');
    newBlock.textContent = 'Nouveau texte g√©nial !'; // Texte par d√©faut
    
    editor.appendChild(newBlock);
    
    // Entre directement en mode √©dition pour le nouveau bloc
    enterEditMode(newBlock);
});

// √âcouter les clics dans l'√©diteur pour passer en mode √©dition
editor.addEventListener('click', (event) => {
    if (event.target.classList.contains('text-block')) {
        enterEditMode(event.target);
    }
});

// Bouton "Retour" pour sortir du mode √©dition
backBtn.addEventListener('click', exitEditMode);


// Gestion du bouton EXPORTER (le m√™me que pr√©c√©demment, adapt√©)
exportBtn.addEventListener('click', () => {
    exitEditMode(); // S'assurer qu'on n'est plus en √©dition
    
    const contentHTML = editor.innerHTML;
    const exportContent = `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Export√©e de Mon √âditeur Trop Bien</title>
</head>
<body>
    ${contentHTML}
</body>
</html>`;

    const blob = new Blob([exportContent], { type: 'text/html' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'page_editor_timeo.html';
    
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    alert("Fichier HTML export√© avec succ√®s ! üéâ");
});

// ----------------------------------------------------------------------
// 3. √âV√âNEMENTS DYNAMIQUES (Gras, Italique, etc.)
// ----------------------------------------------------------------------

dynamicToolbar.addEventListener('click', (event) => {
    const target = event.target;
    // On v√©rifie que c'est un bouton d'outil et qu'on n'est pas sur "Exporter"
    if (target.classList.contains('tool-button') && target.id !== 'back-btn' && target.id !== 'export-btn') {
        const command = target.dataset.command;
        
        if (command) {
            document.execCommand(command, false, null);
            activeBlock.focus(); // Garde le focus pour continuer √† taper
        }
    }
});
    </script>
</body>
    
</html>
